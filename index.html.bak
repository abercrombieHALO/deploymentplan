<!DOCTYPE html>
<head>
<!-- original source: http://jsfiddle.net/83k9k/5/ -->
<!--<script src="jquery/jquery-3.5.1.js"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--<script src="jquery/jquery-ui-1.12.1/jquery-ui.js"></script>-->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!--<script src="jquery/sheetjs/dist/xlsx.full.min.js"></script>-->
<script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>


<link rel="stylesheet" href="scripts/team_list_main_styles.css">
<link rel="stylesheet" href="scripts/team_list_print_styles.css" media="print">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
html {overflow-x:auto !important;}
</style>
</head>
<body>

<div class="w3-sidebar w3-light-grey w3-card-4 w3-animate-right" style="display:none;width:15%;right:0" id="mySidebar">
	<div class="w3-bar w3-dark-grey">
		<span class="w3-bar-item w3-padding-16">Qualifications</span>
		<button onclick="w3_close()" class="w3-bar-item w3-button w3-right w3-padding-16" title="close Sidebar">&times;</button>
	</div>
	<div class="w3-container w3-grey">
		<h4 id="sidebarTitle">Ins </h4>
	</div>
	<!--<table class="w3-table-all w3-margin-top" id="qualificationsTable">
		<tr>
			<th style="width:30%;">Ins</th>
			<th style="width:30%;">Cat</th>
			<th style="width:30%;">Trg</th>
		</tr>
		<tr>
			<td>977</td>
			<td>General</td>
			<td>Dem</td>
		</tr>
		<tr>
			<td>977</td>
			<td>ICP</td>
			<td>ICP</td>
		</tr>
		<tr>
			<td>1481</td>
			<td>Gang</td>
			<td>Ster</td>
		</tr>
	</table>-->
	<div class="w3-panel w3-pale-red w3-border" id="noResultsPanel">
		<p>No training records for this insurance number.</p>
	</div>
</div>

<h3 id="printTitle"></h3>
<div id="controls">
	<form>
	<label>Load previous:</label>
	<input id = "inputFile" type="file" onchange="parseInputFile(this)" accept=".xlsx">
	<input class="export spaceControl" type="button" value="Clear changes" onclick="clearChanges()">
	<label class="export spaceControl">Save as:</label>
	<input class="export" type="text" id="outputFilename">
	<input class="export" type="button" value="Save Data File" onclick="writeOutputFile()">
	<input class="export" type="button" value="Print/Export as PDF" onclick="printPage()">
	<input class="export" type="button" value="Export Excel Version" onclick="exportExcelFile()">
	</form>
</div>
<hr>
<div id="teamlist">

</div>
<div id="donors">
</div>
<div id="changes">
</div>

<script>

$(document).on('contextmenu', '.ins', function(ev){
	// update the sidebar title with insurance number
	var sideBarTitle = $('#sidebarTitle').text().split(" ")[0];
	$('#sidebarTitle').text(sideBarTitle + " " + $(this).text());
  
	// filter trainingTable based on insurance number
	var filter, table, tr, td, i, n, panel;
	n = 0;
	filter = $(this).text();
	table = document.getElementById("qualificationsTable");
	tr = table.getElementsByTagName("tr");
	for (i = 0; i < tr.length; i++) {
		td = tr[i].getElementsByTagName("td")[0];
		if (td) {
			txtValue = td.textContent || td.innerText;
			if (txtValue.indexOf(filter) > -1) {
				tr[i].style.display = "";
				n += 1;
			} else {
				tr[i].style.display = "none";
			}
		}
	}
	
	// hide the first column of the table (ins)
	$('#qualificationsTable tr :nth-child(1)').hide();
	
	// if no results, hide training table and display message
	panel = document.getElementById("noResultsPanel");
	if (n > 0) {
		table.style.display = "";
		panel.style.display = "none";
	}
	else {
		table.style.display = "none";
		panel.style.display = "";
	}
	
	// display the sidebar
	document.getElementById("mySidebar").style.display = "block";
  
  return false;
})

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
}
</script>

<script src="scripts/team_list_dragdrop_rows.js"></script>
<script src="scripts/team_list_dragdrop_tables.js"></script>
<script src="scripts/team_list_editdetails.js"></script>
<script src="scripts/team_list_import_file.js"></script>
<script src="scripts/team_list_export_file.js"></script>
<style type="text/css" media="print" id="dynamicPrint"></style>
</body>
</html>
